<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>å®®å´å¤§å­¦ è‹±èªé•·æ–‡èª­è§£ï¼šå®Œå…¨å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ </title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; max-width: 1000px; margin: 0 auto; padding: 20px; background: #f0f2f5; line-height: 1.8; color: #333; }
    .card { background: #fff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-bottom: 25px; }
    
    /* ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« */
    .controls { background: #e9ecef; padding: 15px; border-radius: 8px; margin-bottom: 20px; display: flex; align-items: center; gap: 20px; border-left: 5px solid #007bff; }
    .nav-tabs { display: flex; gap: 10px; margin-bottom: 20px; }
    .nav-tabs button { padding: 12px 20px; border-radius: 8px; border: none; background: #ddd; cursor: pointer; font-weight: bold; }
    .nav-tabs button.active { background: #007bff; color: white; }
    .btn-quiz { background: #dc3545 !important; color: white !important; margin-left: auto; border: 2px solid #a71d2a !important; }

    /* æœ¬æ–‡è¡¨ç¤º */
    .sentence-item { border-left: 5px solid #007bff; background: #f8fbff; padding: 20px; margin-bottom: 15px; border-radius: 8px; cursor: pointer; position: relative; }
    .sentence-item.checked { background-color: #ffff99 !important; border-left-color: #ffcc00; }
    .target-blank { background-color: #ffcccc; color: #cc0000; font-weight: bold; padding: 2px 6px; border: 1px solid #cc0000; border-radius: 4px; display: inline-block; }

    /* è¾æ›¸ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ— */
    .dict-word { color: #d63384; font-weight: bold; border-bottom: 2px solid #ffc1e3; cursor: help; }
    .word-popup { position: absolute; background: white; border: 2px solid #d63384; padding: 15px; border-radius: 12px; box-shadow: 0 8px 25px rgba(0,0,0,0.2); display: none; z-index: 5000; width: 280px; }
    .accent { color: #e53e3e; font-weight: bold; text-decoration: underline; }

    /* ã‚¯ã‚¤ã‚ºã‚¨ãƒªã‚¢ */
    .word-pool { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 10px; background: #f0f0f0; padding: 15px; border-radius: 8px; }
    .pool-item { padding: 8px 15px; background: #fff; border: 1px solid #ccc; border-radius: 5px; cursor: pointer; }
    .answer-zone { min-height: 50px; border-bottom: 3px solid #007bff; padding: 10px; display: flex; gap: 10px; flex-wrap: wrap; background: #fafafa; margin-bottom: 15px; }
    .answer-item { padding: 8px 15px; background: #007bff; color: white; border-radius: 5px; cursor: pointer; }
    .choice-btn { text-align: left; padding: 12px; border: 1px solid #ddd; border-radius: 8px; background: #fff; cursor: pointer; display: block; width: 100%; margin: 5px 0; }
    .choice-btn.selected { background: #e7f3ff; border-color: #007bff; color: #007bff; font-weight: bold; }

    /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
    .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 6000; justify-content: center; align-items: center; }
    .modal-content { background: white; width: 85%; max-width: 800px; padding: 35px; border-radius: 15px; position: relative; max-height: 85vh; overflow-y: auto; }
    .info-section { background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 15px; border-left: 4px solid #007bff; }
    .info-title { font-weight: bold; color: #007bff; margin-bottom: 8px; border-bottom: 1px solid #ddd; }

    .res-box { margin-top: 15px; padding: 15px; border-radius: 8px; font-weight: bold; display: none; }
    .res-pass { background: #d4edda; color: #155724; }
    .res-fail { background: #f8d7da; color: #721c24; }
  </style>
</head>
<body>

<h1>ğŸ“ å®®å´å¤§å­¦ è‹±èªèª­è§£ãƒã‚¹ã‚¿ãƒ¼ï¼ˆå®Œå…¨çµ±åˆç‰ˆï¼‰</h1>

<div class="controls">
  <span>ğŸ”Š èª­ã¿ä¸Šã’ã‚¹ãƒ”ãƒ¼ãƒ‰èª¿æ•´: </span>
  <input type="range" id="speed-range" min="0.5" max="1.5" step="0.1" value="1.0" oninput="updateSpeedDisp()">
  <span id="speed-val">1.0</span>å€é€Ÿ
</div>

<div class="nav-tabs">
  <button id="tab-study" class="active" onclick="showMode('study')">ğŸ“š å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ï¼ˆè§£èª¬ãƒ»å…¨ç™ºéŸ³ï¼‰</button>
  <button id="tab-quiz" class="btn-quiz" onclick="showMode('quiz')">ğŸ“ åˆæ ¼åˆ¤å®šãƒ†ã‚¹ãƒˆ</button>
</div>

<div id="mode-study" class="card">
  <p style="font-size: 0.85em; color: #666;">â€»æ–‡ã‚’ã‚¯ãƒªãƒƒã‚¯ã§é»„è‰²ãƒã‚¤ãƒ©ã‚¤ãƒˆã€‚ğŸ”Šãƒœã‚¿ãƒ³ã§å†ç”Ÿã€å˜èªãƒ›ãƒãƒ¼ã§ã€Œã‚«ã‚¿ã‚«ãƒŠç™ºéŸ³ã€ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
  <div id="study-content"></div>
</div>

<div id="mode-quiz" class="card" style="display:none;">
  <div id="quiz-passage"></div>
  <hr>
  <div id="quiz-questions">
    <div class="quiz-section" data-ans="lonely" data-type="select">
      <strong>å• (1): èµ¤æ (1)ã«å…¥ã‚‹é©åˆ‡ãªèªã‚’é¸ã³ãªã•ã„ã€‚</strong>
      <button class="choice-btn" onclick="selectChoice(this)">happier (ã‚ˆã‚Šå¹¸ã›ãª)</button>
      <button class="choice-btn" onclick="selectChoice(this)">lonely (å­¤ç‹¬ãª)</button>
      <button class="choice-btn" onclick="selectChoice(this)">busy (å¿™ã—ã„)</button>
      <div class="res-box"></div>
    </div>
    <div class="quiz-section" data-ans="èª¿æŸ»ã•ã‚ŒãŸäººã€…" data-type="select">
      <strong>å• (2): ä¸‹ç·šéƒ¨(2) "Those studied" ã®æ­£ã—ã„æ„å‘³ã‚’é¸ã³ãªã•ã„ã€‚</strong>
      <button class="choice-btn" onclick="selectChoice(this)">å‹‰å¼·ç†±å¿ƒãªäººã€…</button>
      <button class="choice-btn" onclick="selectChoice(this)">èª¿æŸ»ã•ã‚ŒãŸäººã€…</button>
      <button class="choice-btn" onclick="selectChoice(this)">ç ”ç©¶ã‚’çµ‚ãˆãŸäººã€…</button>
      <button class="choice-btn" onclick="selectChoice(this)">ã“ã‚Œã‚‰ã®å­¦å•</button>
      <div class="res-box"></div>
    </div>
    <div class="quiz-section" data-ans="surprised" data-type="select">
      <strong>å• (3): èµ¤æ (3)ã«å…¥ã‚‹é©åˆ‡ãªå˜èªã‚’é¸ã³ãªã•ã„ã€‚</strong>
      <button class="choice-btn" onclick="selectChoice(this)">surprised (é©šã‹ã•ã‚ŒãŸ)</button>
      <button class="choice-btn" onclick="selectChoice(this)">bored (é€€å±ˆã—ãŸ)</button>
      <button class="choice-btn" onclick="selectChoice(this)">angry (æ€’ã£ãŸ)</button>
      <div class="res-box"></div>
    </div>
    <div class="quiz-section" data-ans="in order to find out more about" data-type="tap">
      <strong>å• (4): èªç¾¤ã‚’ä¸¦ã¹æ›¿ãˆã¦ç›®çš„ã‚’è¡¨ã™è¡¨ç¾(4)ã‚’å®Œæˆã•ã›ãªã•ã„ã€‚</strong>
      <div class="word-pool" id="pool-4">
        <span class="pool-item" onclick="moveToAnswer(this)">find out</span>
        <span class="pool-item" onclick="moveToAnswer(this)">order</span>
        <span class="pool-item" onclick="moveToAnswer(this)">in</span>
        <span class="pool-item" onclick="moveToAnswer(this)">more about</span>
        <span class="pool-item" onclick="moveToAnswer(this)">to</span>
      </div>
      <div class="answer-zone" id="zone-4"></div>
      <button onclick="clearTap('4')" style="font-size:0.7em;">ãƒªã‚»ãƒƒãƒˆ</button>
      <div class="res-box"></div>
    </div>
  </div>
  <div style="text-align:center;"><button onclick="judgeAll()" style="background:#28a745; color:white; padding:18px 60px; font-size:1.2em; border:none; border-radius:50px; cursor:pointer; font-weight:bold;">ğŸš© åˆæ ¼åˆ¤å®šã‚’è¡Œã†</button></div>
</div>

<div class="card" style="background:#eef9f1; border:2px solid #28a745;">
  <h3>ğŸŒŸ ãƒã‚¤ã‚¹ã‚«ã‚¦ã‚¿ãƒ¼ï¼ˆç™»éŒ²å˜èªãƒªã‚¹ãƒˆï¼‰</h3>
  <div id="stock-list"></div>
</div>

<div id="word-popup" class="word-popup"></div>
<div id="modal-overlay" class="modal-overlay" onclick="closeModal()">
  <div class="modal-content" onclick="event.stopPropagation()">
    <button style="float:right; cursor:pointer; font-size:24px; border:none; background:none;" onclick="closeModal()">Ã—</button>
    <h3 id="modal-title" style="color:#007bff; border-bottom:2px solid #007bff; padding-bottom:10px;">è©³ç´°è§£èª¬</h3>
    <div id="modal-body"></div>
  </div>
</div>

<script>
const fullData = [
  {
    e: "A new study from an American university says that using the Internet for even a few hours a week makes people feel <span class='target-blank'>(1)</span>.", 
    t: "ã‚¢ãƒ¡ãƒªã‚«ã®ã‚ã‚‹å¤§å­¦ã«ã‚ˆã‚‹æ–°ã—ã„ç ”ç©¶ã«ã‚ˆã‚Œã°ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’é€±ã«æ•°æ™‚é–“ä½¿ã†ã ã‘ã§ã‚‚ã€äººã¯ï¼ˆ1ï¼‰ã¨æ„Ÿã˜ã‚‹ã‚ˆã†ã«ãªã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚", 
    g: "ã€Œsays that S+V...ã€ã®å½¢ã§ã€ç ”ç©¶çµæœã®å†…å®¹ã‚’è¿°ã¹ã¦ã„ã¾ã™ã€‚ä¸»ç¯€ã®å‹•è©ã¯ã€Œsaysã€ã§ã™ã€‚thatç¯€ã®ä¸­ã¯ã€ŒS V O Cã€ã®ç¬¬äº”æ–‡å‹ã«ãªã£ã¦ã„ã¾ã™ã€‚ã€Œmake (ä½¿å½¹å‹•è©) + O + feel (åŸå½¢ä¸å®šè©)ã€ã®å½¢ã§ã€ã€ŒOã«ã€œã®æ„Ÿæƒ…ã‚’èµ·ã“ã•ã›ã‚‹ã€ã¨ã„ã†æ„å‘³ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚",
    p: "ãƒ»a new study from Xï¼šXã«ã‚ˆã‚‹æ–°ã—ã„ç ”ç©¶ã¨ã„ã†æ„å‘³ã§ã™ã€‚<br>ãƒ»even a few hours a weekï¼šé€±ã«ã»ã‚“ã®æ•°æ™‚é–“ã§ã‚‚ã€ã¨ã„ã†å¼·èª¿ã®ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚<br>ãƒ»make O feel Cï¼šOã«Cã®æ°—åˆ†ã«ã•ã›ã‚‹ã€ã¨ã„ã†ä½¿å½¹ã®è¡¨ç¾ã§ã™ã€‚"
  },
  {
    e: "Ninety-three families who used the Internet at home were studied for two years, and their emotional health was measured.", 
    t: "å®¶åº­ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’ä½¿ã£ã¦ã„ã‚‹93ä¸–å¸¯ãŒ2å¹´é–“èª¿æŸ»ã•ã‚Œã€ãã®ç²¾ç¥çš„ãªå¥åº·çŠ¶æ…‹ãŒæ¸¬å®šã•ã‚Œã¾ã—ãŸã€‚", 
    g: "ã€Œwhoã€ã¯é–¢ä¿‚ä»£åè©ã§ã€å…ˆè¡Œè©ã§ã‚ã‚‹ã€Œfamiliesã€ã‚’ä¿®é£¾ã—ã¦ã„ã¾ã™ã€‚ä¸»èªã¯ã€ŒNinety-three families...ã€ã§ã€ã€Œwere studiedã€ã¨ã€Œwas measuredã€ã¨ã„ã†2ã¤ã®å—å‹•æ…‹ã®å‹•è©ãŒã€Œandã€ã«ã‚ˆã£ã¦çµã°ã‚Œã¦ã„ã¾ã™ã€‚ã„ãšã‚Œã‚‚å—å‹•æ…‹ï¼ˆbeå‹•è© + éå»åˆ†è©ï¼‰ã®æ–‡ã§ã™ã€‚",
    p: "ãƒ»use the Internet at homeï¼šå®¶åº­ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’ä½¿ã†ã€ã¨ã„ã†æ„å‘³ã§ã™ã€‚<br>ãƒ»be studied for two yearsï¼š2å¹´é–“ç ”ç©¶ã•ã‚Œã‚‹ã€ã¨ã„ã†å—å‹•æ…‹ã®è¡¨ç¾ã§ã™ã€‚<br>ãƒ»emotional healthï¼šç²¾ç¥çš„ãªå¥åº·ã€‚<br>ãƒ»be measuredï¼šæ¸¬å®šã•ã‚Œã‚‹ã€ã¨ã„ã†æ„å‘³ã§ã™ã€‚"
  },
  {
    e: "<span class='target-blank'>(2) Those studied</span> reported a decrease in communication with family and friends.", 
    t: "èª¿æŸ»å¯¾è±¡ã¨ãªã£ãŸäººã€…ã¯ã€å®¶æ—ã‚„å‹äººã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ¸›å°‘ã‚’å ±å‘Šã—ã¾ã—ãŸã€‚", 
    g: "ã€ŒThose studiedã€ã¯ã€ã€ŒThose who were studiedã€ã®çœç•¥å½¢ã§ã€ã€Œèª¿æŸ»ã•ã‚ŒãŸäººã€…ã€ã‚’æ„å‘³ã—ã¦ã„ã¾ã™ã€‚ã€ŒS V Oã€ã‹ã‚‰æˆã‚‹ç¬¬ä¸‰æ–‡å‹ã®æ§‹é€ ã§ã™ã€‚",
    p: "ãƒ»Those studiedï¼šèª¿æŸ»ã•ã‚ŒãŸäººã€…ã‚’æŒ‡ã—ã¾ã™ã€‚<br>ãƒ»report a decrease in Xï¼šXã®æ¸›å°‘ã‚’å ±å‘Šã™ã‚‹ã€‚<br>ãƒ»communication with Xï¼šXã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ„æ€ç–é€šï¼‰ã€‚"
  },
  {
    e: "Researchers said that this lessening of communication related directly to the amount of time spent using the Internet.", 
    t: "ç ”ç©¶è€…ã‚‰ã¯ã€ã“ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ¸›å°‘ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã®ä½¿ç”¨ã«è²»ã‚„ã—ãŸæ™‚é–“ã®é‡ã¨ç›´æ¥é–¢é€£ã—ã¦ã„ã‚‹ã¨è¿°ã¹ã¾ã—ãŸã€‚", 
    g: "ã€Œthis lessening of communicationã€ãŒä¸»èªã§ã™ã€‚ã€Œrelated to Xã€ã§ã€ŒXã«é–¢é€£ã—ã¦ã„ãŸã€ã€‚ã€Œspentã€ã¯éå»åˆ†è©ã¨ã—ã¦ã€Œthe amount of timeã€ã‚’å¾Œã‚ã‹ã‚‰ä¿®é£¾ã—ã¦ã„ã¾ã™ã€‚",
    p: "ãƒ»lessening of Xï¼šXãŒæ¸›ã‚‹ã“ã¨ã€æ¸›å°‘ã™ã‚‹ã“ã¨ã€‚<br>ãƒ»relate directly to Xï¼šXã¨ç›´æ¥çš„ã«é–¢ä¿‚ã™ã‚‹ã€‚<br>ãƒ»the amount of time spent doing Xï¼šXã‚’ã™ã‚‹ã“ã¨ã«è²»ã‚„ã•ã‚ŒãŸæ™‚é–“ã®é‡ã€‚"
  },
  {
    e: "One researcher said that this is because the people using the Internet during the study spent less time in important personal relationships with family and friends.", 
    t: "ã‚ã‚‹ç ”ç©¶è€…ã¯ã€ã“ã‚Œã¯ç ”ç©¶æœŸé–“ä¸­ã«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’ä½¿ã£ã¦ã„ã‚‹äººã€…ãŒã€å®¶æ—ã‚„å‹äººã¨ã®äººé–“é–¢ä¿‚ã«è²»ã‚„ã™æ™‚é–“ãŒå°‘ãªããªã£ãŸãŸã‚ã§ã‚ã‚‹ã€ã¨è¿°ã¹ã¾ã—ãŸã€‚", 
    g: "ã€Œthis is because S+V...ã€ã§ã€Œã“ã‚Œã¯SãŒVã™ã‚‹ã‹ã‚‰ã§ã‚ã‚‹ã€ã¨ç†ç”±ã‚’èª¬æ˜ã™ã‚‹æ§‹æ–‡ã§ã™ã€‚ã€Œusing the Internetã€ã¯ç¾åœ¨åˆ†è©ã¨ã—ã¦ã€Œthe peopleã€ã‚’ä¿®é£¾ã—ã¦ã„ã¾ã™ã€‚",
    p: "ãƒ»this is because...ï¼šç†ç”±ã¯ã€œã ã‹ã‚‰ã§ã™ã€‚<br>ãƒ»spend less time in Xï¼šXã«è²»ã‚„ã™æ™‚é–“ãŒã‚ˆã‚Šå°‘ãªã„ã€‚<br>ãƒ»personal relationshipsï¼šå€‹äººçš„ãªäººé–“é–¢ä¿‚ã€‚"
  },
  {
    e: "With less interpersonal communication comes a greater feeling of loneliness, and loneliness causes sadness, noted one researcher involved in the study.", 
    t: "å¯¾äººã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ¸›ã‚‹ã«ã¤ã‚Œã¦ã€ã‚ˆã‚Šå¼·ã„å­¤ç‹¬æ„ŸãŒä¼´ã„ã€ãã—ã¦å­¤ç‹¬ã¯æ‚²ã—ã¿ã‚’ç”Ÿã‚€ã®ã§ã‚ã‚‹ã€ã¨ãã®ç ”ç©¶ã«é–¢ã‚ã£ãŸã‚ã‚‹ç ”ç©¶è€…ã¯æŒ‡æ‘˜ã—ã¾ã—ãŸã€‚", 
    g: "ã€ŒWith less...ã€ã¯ã€Œã€œãŒå°‘ãªããªã‚‹ã«ã¤ã‚Œã¦ã€ã¨ã„ã†ä»˜å¸¯çŠ¶æ³çš„ãªãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã€‚ã€Œloneliness causes sadnessã€ã¯ã€Œå­¤ç‹¬ãŒæ‚²ã—ã¿ã‚’å¼•ãèµ·ã“ã™ã€ã¨ã„ã†å› æœé–¢ä¿‚ã§ã™ã€‚",
    p: "ãƒ»interpersonal communicationï¼šå¯¾äººã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€‚<br>ãƒ»lonelinessï¼šå­¤ç‹¬ã€å¯‚ã—ã•ã€‚<br>ãƒ»causeï¼šï½ã‚’å¼•ãèµ·ã“ã™ã€‚"
  },
  {
    e: "William Scherlis, director of the university's Informational Technology Center and research team member, said the team was <span class='target-blank'>(3)</span> by the results of the study.", 
    t: "åŒå¤§å­¦ã®æƒ…å ±æŠ€è¡“ã‚»ãƒ³ã‚¿ãƒ¼æ‰€é•·ã§ã‚ã‚‹ã‚¦ã‚£ãƒªã‚¢ãƒ ãƒ»ã‚·ãƒ£ãƒ¼ãƒªã‚¹æ°ã¯ã€ãƒãƒ¼ãƒ ãŒãã®ç ”ç©¶çµæœã«é©šã‹ã•ã‚ŒãŸã¨è¿°ã¹ã¾ã—ãŸã€‚", 
    g: "ã€ŒWilliam Scherlisã€ã¨ãã‚Œã«ç¶šãåè©å¥ã¯åŒæ ¼ã®é–¢ä¿‚ã§ã™ã€‚ã€Œwas (3) by...ã€ã¯å—å‹•æ…‹ã®æ§‹é€ ã«ãªã£ã¦ã„ã¾ã™ã€‚",
    p: "ãƒ»directorï¼šæ‰€é•·ã€‚<br>ãƒ»informational technologyï¼šæƒ…å ±æŠ€è¡“ã€‚<br>ãƒ»results of the studyï¼šç ”ç©¶ã®çµæœã€‚"
  },
  {
    e: "He said that the research team members had expected Internet users to feel happier and more involved with a wider range of people because using the Internet is an activity that involves communication.", 
    t: "å½¼ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆåˆ©ç”¨ã¯äº¤æµã‚’ä¼´ã†æ´»å‹•ã§ã‚ã‚‹ãŸã‚ã€åˆ©ç”¨è€…ã¯ã‚ˆã‚Šå¹¸ã›ã«ãªã‚‹ã¨äºˆæƒ³ã—ã¦ã„ãŸã€ã¨è¿°ã¹ã¾ã—ãŸã€‚", 
    g: "ã€Œexpect O to Vã€ã§ã€ŒOãŒVã™ã‚‹ã¨äºˆæƒ³ã™ã‚‹ã€ã¨ã„ã†æ§‹æ–‡ã€‚å¾ŒåŠã®ã€Œthatã€ã¯ã€Œactivityã€ã‚’ä¿®é£¾ã™ã‚‹é–¢ä¿‚ä»£åè©ã§ã™ã€‚",
    p: "ãƒ»expect O to Vï¼šOãŒVã™ã‚‹ã¨äºˆæƒ³ã™ã‚‹ã€‚<br>ãƒ»a wider range ofï¼šã‚ˆã‚Šå¹…åºƒã„ã€‚<br>ãƒ»involve communicationï¼šæ„æ€ç–é€šã‚’ä¼´ã†ã€‚"
  },
  {
    e: "Should the results of this study cause concern?", 
    t: "ã“ã®ç ”ç©¶ã®çµæœã¯ã€æ‡¸å¿µã‚’å¼•ãèµ·ã“ã™ã¹ãã‚‚ã®ãªã®ã§ã—ã‚‡ã†ã‹ã€‚", 
    g: "åŠ©å‹•è©ã€ŒShouldã€ã‹ã‚‰å§‹ã¾ã‚‹ç–‘å•æ–‡ã€‚ã€Œcause concernã€ã§ã€Œæ‡¸å¿µã‚’ç”Ÿã˜ã•ã›ã‚‹ã€ã¨ã„ã†æ„å‘³ã«ãªã‚Šã¾ã™ã€‚",
    p: "ãƒ»cause concernï¼šæ‡¸å¿µã‚’å¼•ãèµ·ã“ã™ã€å¿ƒé…ã•ã›ã‚‹ã€‚"
  },
  {
    e: "Mr. Scherlis said it would be wrong to decide that the Internet is a bad thing;", 
    t: "ã‚·ãƒ£ãƒ¼ãƒªã‚¹æ°ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆãŒæ‚ªã„ã‚‚ã®ã ã¨æ–­å®šã—ã¦ã—ã¾ã†ã®ã¯é–“é•ã„ã§ã‚ã‚ã†ã€ã¨è¿°ã¹ã¾ã—ãŸã€‚", 
    g: "ã€Œit would be wrong to Vã€ã¨ã„ã†å½¢å¼ä¸»èªã€Œitã€ã‚’ç”¨ã„ãŸæ§‹æ–‡ã§ã™ã€‚çœŸã®ä¸»èªã¯ã€Œto decide...ã€ä»¥ä¸‹ã§ã™ã€‚",
    p: "ãƒ»decide that S Vï¼šã€œã§ã‚ã‚‹ã¨åˆ¤æ–­ã™ã‚‹ã€æ–­å®šã™ã‚‹ã€‚<br>ãƒ»bad thingï¼šæ‚ªã„ã“ã¨ã€å¥½ã¾ã—ããªã„ã‚‚ã®ã€‚"
  },
  {
    e: "however, he urged people to use good judgment about how they use it.", 
    t: "ã—ã‹ã—ãªãŒã‚‰ã€å½¼ã¯äººã€…ã«å¯¾ã—ã€åˆ©ç”¨æ–¹æ³•ã«ã¤ã„ã¦è‰¯è­˜ã‚ã‚‹åˆ¤æ–­ã‚’ã™ã‚‹ã‚ˆã†ä¿ƒã—ã¾ã—ãŸã€‚", 
    g: "ã€Œurge O to Vã€ã§ã€ŒOã«Vã™ã‚‹ã‚ˆã†å¼·ãä¿ƒã™ã€æ§‹æ–‡ã€‚ã€Œhow they use itã€ã¯é–“æ¥ç–‘å•æ–‡ã§ã™ã€‚",
    p: "ãƒ»urge O to Vï¼šOã«Vã™ã‚‹ã‚ˆã†ã«å¼·ãä¿ƒã™ã€‚<br>ãƒ»use good judgmentï¼šè‰¯è­˜ã‚ã‚‹åˆ¤æ–­ã‚’ã™ã‚‹ã€‚"
  },
  {
    e: "He suggested, for example, placing the computer in a center of activity in the home so that the user would not be alone in a room away from other people.", 
    t: "å½¼ã¯ã€åˆ©ç”¨è€…ãŒä¸€äººãã‚Šã«ãªã‚‰ãªã„ã‚ˆã†ã«ã€ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã‚’å®¶åº­å†…ã®æ´»å‹•ã®ä¸­å¿ƒã«ç½®ãã“ã¨ã‚’ææ¡ˆã—ã¾ã—ãŸã€‚", 
    g: "ã€Œsuggest doingã€ã§ã€Œã€œã™ã‚‹ã“ã¨ã‚’ææ¡ˆã™ã‚‹ã€å½¢ã€‚ã€Œso that S Vã€ã¯ç›®çš„ï¼ˆã€œã§ãã‚‹ã‚ˆã†ã«ï¼‰ã‚’è¡¨ã—ã¾ã™ã€‚",
    p: "ãƒ»suggest doing Xï¼šXã™ã‚‹ã“ã¨ã‚’ææ¡ˆã™ã‚‹ã€‚<br>ãƒ»so that S Vï¼šSãŒVã§ãã‚‹ã‚ˆã†ã«ã€‚<br>ãƒ»away from Xï¼šXã‹ã‚‰é›¢ã‚ŒãŸå ´æ‰€ã«ã€‚"
  },
  {
    e: "He also <span class='target-blank'>(4) suggested</span> that people limit the amount of time they spend on the Internet.", 
    t: "å½¼ã¯ã¾ãŸã€äººã€…ãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«è²»ã‚„ã™æ™‚é–“ã‚’åˆ¶é™ã™ã‚‹ã“ã¨ã‚‚ææ¡ˆã—ã¾ã—ãŸã€‚", 
    g: "ã€Œsuggest that S (should) Vã€ã®æ§‹æ–‡ã€‚thatç¯€å†…ã§ã¯å‹•è©ãŒåŸå½¢ï¼ˆlimitï¼‰ã«ãªã‚Šã¾ã™ã€‚",
    p: "ãƒ»suggest that S Vï¼šSãŒVã™ã‚‹ã“ã¨ã‚’ææ¡ˆã™ã‚‹ã€‚<br>ãƒ»limit the amount of timeï¼šæ™‚é–“ã®é‡ã‚’åˆ¶é™ã™ã‚‹ã€‚"
  },
  {
    e: "The researchers are planning to continue their research in order to find out more about the effects of the Internet,", 
    t: "ç ”ç©¶è€…ãŸã¡ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã®å½±éŸ¿ã«ã¤ã„ã¦ã‚ˆã‚Šè©³ã—ãè§£æ˜ã™ã‚‹ãŸã‚ã«ã€ç ”ç©¶ã‚’ç¶™ç¶šã™ã‚‹ã“ã¨ã‚’è¨ˆç”»ã—ã¦ã„ã¾ã™ã€‚", 
    g: "ã€Œbe planning to Vã€ã§äºˆå®šã€‚ã€Œin order to Vã€ã¯ã€Œã€œã™ã‚‹ãŸã‚ã«ã€ã¨ã„ã†ç›®çš„ã‚’è¡¨ã™ç†Ÿèªã§ã™ã€‚",
    p: "ãƒ»be planning to Vï¼šã€œã™ã‚‹ã“ã¨ã‚’è¨ˆç”»ã—ã¦ã„ã‚‹ã€‚<br>ãƒ»in order to Vï¼šï½ã™ã‚‹ãŸã‚ã«ã€‚<br>ãƒ»find outï¼šã€œã‚’çªãæ­¢ã‚ã‚‹ã€è§£æ˜ã™ã‚‹ã€‚"
  },
  {
    e: "and will study families in different situations.", 
    t: "ãã—ã¦ã€ç•°ãªã‚‹çŠ¶æ³ã«ã‚ã‚‹å®¶æ—ã«ã¤ã„ã¦ã‚‚èª¿æŸ»ã—ã¦ã„ãäºˆå®šã§ã™ã€‚", 
    g: "ä¸»èªã«å¯¾ã™ã‚‹2ã¤ç›®ã®è¿°èªã€Œwill studyã€ãŒã€Œandã€ã§çµã°ã‚Œã¦ã„ã¾ã™ã€‚",
    p: "ãƒ»in different situationsï¼šç•°ãªã‚‹çŠ¶æ³ã«ãŠã„ã¦ã€‚<br>ãƒ»will studyï¼šèª¿æŸ»ã™ã‚‹äºˆå®šã§ã‚ã‚‹ã€‚"
  }
];

// é‡è¦å˜èª 50èªä»¥ä¸Šï¼ˆã‚«ã‚¿ã‚«ãƒŠç™ºéŸ³ãƒ»æ„å‘³ï¼‰
const vocab = {
  "study": { r: "ã€ã‚¹ã‚¿ã€‘ãƒ‡ã‚£", m: "ç ”ç©¶ã€èª¿æŸ»" },
  "university": { r: "ãƒ¦ãƒ‹ã€ãƒ´ã‚¡ã€‘ãƒ¼ã‚·ãƒ†ã‚£", m: "å¤§å­¦" },
  "Internet": { r: "ã€ã‚¤ã€‘ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ", m: "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ" },
  "hours": { r: "ã€ã‚¢ã€‘ãƒ¯ãƒ¼ã‚º", m: "æ™‚é–“" },
  "makes": { r: "ã€ãƒ¡ã€‘ã‚¤ã‚¯ã‚¹", m: "ï½ã«ã™ã‚‹ï¼ˆä½¿å½¹å‹•è©ï¼‰" },
  "feel": { r: "ã€ãƒ•ã‚£ã€‘ãƒ¼ãƒ«", m: "æ„Ÿã˜ã‚‹" },
  "families": { r: "ã€ãƒ•ã‚¡ã€‘ãƒŸãƒªãƒ¼ã‚º", m: "å®¶æ—ã€ä¸–å¸¯" },
  "emotional": { r: "ã‚¨ã€ãƒ¢ã€‘ã‚¦ã‚·ãƒ§ãƒŠãƒ«", m: "ç²¾ç¥çš„ãªã€æ„Ÿæƒ…çš„ãª" },
  "health": { r: "ã€ãƒ˜ã€‘ãƒ«ã‚¹", m: "å¥åº·" },
  "measured": { r: "ã€ãƒ¡ã€‘ã‚¸ãƒ£ãƒ¼ãƒ‰", m: "æ¸¬å®šã•ã‚ŒãŸ" },
  "reported": { r: "ãƒªã€ãƒã€‘ãƒ¼ãƒ†ã‚£ãƒƒãƒ‰", m: "å ±å‘Šã—ãŸ" },
  "decrease": { r: "ãƒ‡ã‚£ã€ã‚¯ã€‘ãƒªãƒ¼ã‚¹", m: "æ¸›å°‘ã€ä½ä¸‹" },
  "communication": { r: "ã‚³ãƒŸãƒ¥ã€ãƒ‹ã€‘ã‚±ãƒ¼ã‚·ãƒ§ãƒ³", m: "é€£çµ¡ã€æ„æ€ç–é€š" },
  "Researchers": { r: "ãƒªã€ã‚µã€‘ãƒ¼ãƒãƒ£ãƒ¼ã‚º", m: "ç ”ç©¶è€…ãŸã¡" },
  "lessening": { r: "ã€ãƒ¬ã€‘ã‚¹ãƒ‹ãƒ³ã‚°", m: "æ¸›å°‘ã•ã›ã‚‹ã“ã¨" },
  "related": { r: "ãƒªã€ãƒ¬ã€‘ã‚¤ãƒ†ã‚£ãƒƒãƒ‰", m: "é–¢é€£ã—ãŸ" },
  "directly": { r: "ãƒ€ã‚¤ã€ãƒ¬ã€‘ã‚¯ãƒˆãƒªã‚£", m: "ç›´æ¥çš„ã«" },
  "amount": { r: "ã‚¢ã€ãƒã€‘ã‚¦ãƒ³ãƒˆ", m: "é‡" },
  "spent": { r: "ã‚¹ã€ãƒšã€‘ãƒ³ãƒˆ", m: "ï¼ˆæ™‚é–“ã‚’ï¼‰è²»ã‚„ã—ãŸ" },
  "personal": { r: "ã€ãƒ‘ã€‘ãƒ¼ã‚½ãƒŠãƒ«", m: "å€‹äººçš„ãª" },
  "relationships": { r: "ãƒªã€ãƒ¬ã€‘ã‚¤ã‚·ãƒ§ãƒ³ã‚·ãƒƒãƒ—ã‚¹", m: "äººé–“é–¢ä¿‚" },
  "interpersonal": { r: "ã‚¤ãƒ³ã‚¿ãƒ¼ã€ãƒ‘ã€‘ãƒ¼ã‚½ãƒŠãƒ«", m: "å¯¾äººã®" },
  "loneliness": { r: "ã€ãƒ­ã€‘ãƒ³ãƒªãƒã‚¹", m: "å­¤ç‹¬ã€å¯‚ã—ã•" },
  "causes": { r: "ã€ã‚³ã€‘ãƒ¼ã‚¼ã‚º", m: "ï½ã‚’å¼•ãèµ·ã“ã™" },
  "sadness": { r: "ã€ã‚µã€‘ãƒ‰ãƒã‚¹", m: "æ‚²ã—ã¿" },
  "involved": { r: "ã‚¤ãƒ³ã€ãƒ´ã‚©ã€‘ãƒ«ãƒ´ãƒ‰", m: "é–¢ã‚ã£ã¦ã„ã‚‹" },
  "director": { r: "ãƒ€ã‚¤ã€ãƒ¬ã€‘ã‚¯ã‚¿ãƒ¼", m: "æ‰€é•·" },
  "results": { r: "ãƒªã€ã‚¶ã€‘ãƒ«ãƒ„", m: "çµæœ" },
  "expected": { r: "ã‚¨ã‚¯ã‚¹ã€ãƒšã€‘ã‚¯ãƒ†ã‚£ãƒƒãƒ‰", m: "äºˆæƒ³ã—ãŸ" },
  "happier": { r: "ã€ãƒã€‘ãƒ”ã‚¢", m: "ã‚ˆã‚Šå¹¸ã›ãª" },
  "activity": { r: "ã‚¢ã‚¯ã€ãƒ†ã‚£ã€‘ãƒ“ãƒ†ã‚£", m: "æ´»å‹•" },
  "concern": { r: "ã‚³ãƒ³ã€ã‚µã€‘ãƒ¼ãƒ³", m: "æ‡¸å¿µã€å¿ƒé…" },
  "wrong": { r: "ã€ãƒ­ã€‘ãƒ³ã‚°", m: "é–“é•ã£ãŸ" },
  "decide": { r: "ãƒ‡ã‚£ã€ã‚µã€‘ã‚¤ãƒ‰", m: "æ±ºã‚ã‚‹ã€æ–­å®šã™ã‚‹" },
  "however": { r: "ãƒã€ã‚¦ã€‘ã‚¨ãƒ´ã‚¡ãƒ¼", m: "ã—ã‹ã—ãªãŒã‚‰" },
  "urged": { r: "ã€ã‚¢ã€‘ãƒ¼ã‚¸ãƒ‰", m: "ä¿ƒã—ãŸ" },
  "judgment": { r: "ã€ã‚¸ãƒ£ã€‘ãƒƒã‚¸ãƒ¡ãƒ³ãƒˆ", m: "åˆ¤æ–­" },
  "suggested": { r: "ã‚µã€ã‚¸ã‚§ã€‘ã‚¹ãƒ†ã‚£ãƒƒãƒ‰", m: "ææ¡ˆã—ãŸ" },
  "alone": { r: "ã‚¢ã€ãƒ­ã€‘ã‚¦ãƒ³", m: "ä¸€äººã§" },
  "limit": { r: "ã€ãƒªã€‘ãƒŸãƒƒãƒˆ", m: "åˆ¶é™ã™ã‚‹" },
  "planning": { r: "ãƒ—ã€ãƒ©ã€‘ãƒ‹ãƒ³ã‚°", m: "è¨ˆç”»ã—ã¦ã„ã‚‹" },
  "effects": { r: "ã‚¤ã€ãƒ•ã‚§ã€‘ã‚¯ãƒ„", m: "å½±éŸ¿" },
  "situations": { r: "ã‚·ãƒãƒ¥ã€ã‚¨ã€‘ã‚¤ã‚·ãƒ§ãƒ³ã‚º", m: "çŠ¶æ³" }
};

let stockedWords = [];
let hideTimeout;

function init() {
  const studyDiv = document.getElementById('study-content');
  const quizPassage = document.getElementById('quiz-passage');
  
  const render = (container, hasDetails = true) => {
    fullData.forEach((d, i) => {
      let html = d.e;
      Object.keys(vocab).sort((a,b)=>b.length-a.length).forEach(v => {
        const reg = new RegExp(`\\b${v}\\b`, 'gi');
        html = html.replace(reg, `<span class="dict-word" onmouseover="showVocab(event,'${v}')" onmouseleave="hideVocab()">${v}</span>`);
      });
      const div = document.createElement('div');
      div.className = 'sentence-item';
      div.innerHTML = `<strong>${i+1}.</strong> ${html}`;
      
      div.innerHTML += `
        <div style="margin-top:10px; display:flex; gap:8px;">
          <button onclick="toggleTrans(${i}, event)">å’Œè¨³</button> 
          <button onclick="openModal(${i}, event)" style="background:#fff9e6; border-color:#ed8936;">ğŸ“– è§£èª¬</button>
          <button onclick="speakSentence(${i}, event)" style="background:#eef6ff; border-color:#007bff;">ğŸ”Š å†ç”Ÿ</button>
        </div>
        <div id="tr-${container.id === 'mode-quiz' ? 'q-' : ''}${i}" style="display:none; color:#0056b3; margin-top:10px; padding:10px; background:#f0f7ff; border-radius:5px;">${d.t}</div>`;
      
      div.onclick = (e) => { if(e.target.tagName !== 'BUTTON' && !e.target.classList.contains('dict-word')) div.classList.toggle('checked'); };
      container.appendChild(div);
    });
  };
  render(studyDiv);
  render(quizPassage);
}

function updateSpeedDisp() { document.getElementById('speed-val').innerText = document.getElementById('speed-range').value; }

function speakSentence(i, e) {
  if(e) e.stopPropagation();
  window.speechSynthesis.cancel();
  const text = fullData[i].e.replace(/<[^>]*>/g, '').replace(/\(\d\)/g, '');
  const u = new SpeechSynthesisUtterance(text);
  u.lang = 'en-US';
  u.rate = parseFloat(document.getElementById('speed-range').value);
  window.speechSynthesis.speak(u);
}

function speakWord(w) {
  window.speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(w);
  u.lang = 'en-US';
  window.speechSynthesis.speak(u);
}

function showVocab(e, w) {
  clearTimeout(hideTimeout);
  const p = document.getElementById('word-popup');
  const key = Object.keys(vocab).find(k => k.toLowerCase() === w.toLowerCase());
  const info = vocab[key];
  const reading = info.r.replace(/ã€(.*?)ã€‘/g, '<span class="accent">$1</span>');
  p.innerHTML = `<strong>${w}</strong><br><small>${reading}</small><br><b>${info.m}</b><br><div style="margin-top:8px; display:flex; gap:5px;"><button onclick="speakWord('${w}')" style="flex:1; font-size:0.75em;">ğŸ”Š å†ç”Ÿ</button><button onclick="addStock('${key}')" style="flex:1; font-size:0.75em; background:#28a745; color:white; border:none;">ğŸŒŸ ç™»éŒ²</button></div>`;
  p.style.display = 'block'; p.style.left = (e.pageX + 10) + 'px'; p.style.top = (e.pageY + 10) + 'px';
  p.onmouseenter = () => clearTimeout(hideTimeout);
  p.onmouseleave = hideVocab;
}
function hideVocab() { hideTimeout = setTimeout(() => { document.getElementById('word-popup').style.display = 'none'; }, 500); }

function addStock(w) { if(!stockedWords.includes(w)){ stockedWords.push(w); updateStockUI(); } }
function updateStockUI() { document.getElementById('stock-list').innerHTML = stockedWords.map(w => `<div class="stock-item"><span><strong>${w}</strong>ï¼š${vocab[w].m}</span><button onclick="speakWord('${w}')">ğŸ”Š</button></div>`).join(''); }

function openModal(i, e) {
  e.stopPropagation();
  const data = fullData[i];
  document.getElementById('modal-title').innerText = `ç¬¬ ${i+1} æ–‡ã®å¾¹åº•è§£èª¬`;
  document.getElementById('modal-body').innerHTML = `
    <div class="info-section"><div class="info-title">â–  æ–‡ã®æ§‹æˆã¨æ–‡æ³•äº‹é …</div><div>${data.g}</div></div>
    <div class="info-section"><div class="info-title">â–  é‡è¦è¡¨ç¾ãƒ»ç†Ÿèª</div><div>${data.p}</div></div>`;
  document.getElementById('modal-overlay').style.display = 'flex';
}
function closeModal() { document.getElementById('modal-overlay').style.display = 'none'; }
function toggleTrans(i, e) { e.stopPropagation(); const id = e.target.closest('.card').id === 'mode-study' ? `tr-${i}` : `tr-q-${i}`; const tr = document.getElementById(id); tr.style.display = (tr.style.display==='none'?'block':'none'); }

function judgeAll() {
  document.querySelectorAll('.quiz-section').forEach(sec => {
    const type = sec.getAttribute('data-type');
    const correct = sec.getAttribute('data-ans');
    const res = sec.querySelector('.res-box');
    let userAns = (type === 'select') ? (sec.querySelector('.selected')?.innerText.split(' ')[0] || "") : Array.from(sec.querySelector('.answer-zone').children).map(c => c.innerText).join(' ');
    res.style.display = 'block';
    if(userAns.includes(correct) || userAns === correct) { res.innerHTML = "âœ… æ­£è§£ã§ã™ï¼ç´ æ™´ã‚‰ã—ã„ï¼"; res.className = "res-box res-pass"; }
    else { res.innerHTML = "âŒ æ®‹å¿µãªãŒã‚‰é–“é•ã„ã§ã™ã€‚è§£èª¬ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚"; res.className = "res-box res-fail"; }
  });
}

function moveToAnswer(el) {
  const zone = document.getElementById('zone-4');
  const newEl = document.createElement('span');
  newEl.className = 'answer-item'; newEl.innerText = el.innerText;
  newEl.onclick = () => { zone.removeChild(newEl); el.style.display = 'inline-block'; };
  zone.appendChild(newEl); el.style.display = 'none';
}
function clearTap(id) { document.getElementById(`zone-${id}`).innerHTML = ''; document.querySelectorAll(`#pool-${id} .pool-item`).forEach(item => item.style.display = 'inline-block'); }
function selectChoice(btn) { btn.parentElement.querySelectorAll('button').forEach(b => b.classList.remove('selected')); btn.classList.add('selected'); }
function showMode(m) {
  document.getElementById('mode-study').style.display = (m==='study'?'block':'none');
  document.getElementById('mode-quiz').style.display = (m==='quiz'?'block':'none');
  document.getElementById('tab-study').className = (m==='study'?'active':'');
  document.getElementById('tab-quiz').className = (m==='quiz'?'active btn-quiz':'btn-quiz');
}
init();
</script>
</body>
</html>
